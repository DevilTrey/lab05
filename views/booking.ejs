<!DOCTYPE html>
<html>
  <head>
    <title>All Bookings</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
        <%= booking.name %>
        <%= booking.numTickets %>
        <%= booking.email %>
        <%= booking.team %>
        <%= booking.superhero %>
        <%= booking.payment %>

        <form action="/bookings/delete/<%= booking.$loki %>" method="POST">
            <button type="submit">delete</button>
            
        </form>

        <button type="button" class="button is-danger" onclick="deleteBooking('<%= booking.$loki %>')">Delete</button>

        <form action="/bookings/update/<%= booking.$loki %>" method="GET">
          <button type="submit">update</button>
          
      </form>
        
      <script>
        async function deleteBooking(id) {
            var r = confirm("Confirm Delete?");
            
            if (r) {
                var response = await fetch("/bookings/delete/" + id, {
                    method: "POST"
                });
    
                if (response.ok) {
                    // var html = await response.text();
                    // alert(html);
                    alert("Booking deleted.");
location.assign("/bookings");
                } else {
                    alert(response.status + ": " + response.statusText);
                }
    
            } else {
                alert("cancelled");
            }
        };
        
  var response = await fetch("/bookings/" + id, {
    method: "DELETE",
});
    </script>
  </body>
</html> 